<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with rbabylon • rbabylon</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with rbabylon">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rbabylon</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started with rbabylon</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/metrumresearchgroup/rbabylon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting Started with rbabylon</h1>
                        <h4 class="author">Seth Green</h4>
            
            <h4 class="date">2020-03-20</h4>
      
      
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>rbabylon</code> is an R interface for running <code>babylon</code>. <code>babylon</code> is (will be) a complete solution for managing projects involving modeling and simulation with a number of software solutions used in pharmaceutical sciences. Currently, only NONMEM is supported, so this vignette will only address that.</p>
<p>This “Getting Started with rbabylon” vignette takes the user through some basic scenarios for modeling with NONMEM using <code>rbabylon</code>, introducing you to its standard workflow and functionality.</p>
</div>
<div id="setup" class="section level1">
<h1 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h1>
<div id="installing-babylon" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-babylon" class="anchor"></a>Installing babylon</h2>
<p>To use <code>rbabylon</code> you must first install <code>babylon</code>, often aliased as <code>bbi</code>, on your system. Check the <a href="https://github.com/metrumresearchgroup/babylon">babylon documentation</a> for installation instructions.</p>
<p>There is also some initial setup to get <code>rbabylon</code> configured. First, load the library and tell it where to find the <code>babylon</code> installation. For the purposes of this demo, assume the babylon executable is at <code>/data/apps/bbi</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rbabylon)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="st">'rbabylon.bbi_exe_path'</span> =<span class="st"> '/data/apps/bbi'</span>)</a></code></pre></div>
<p>Next, initialize <code>babylon</code> by pointing it to a working installation of NONMEM, and default version to use.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/bbi_init.html">bbi_init</a></span>(<span class="dt">.dir =</span> <span class="st">"../inst/nonmem"</span>,     <span class="co"># the modeling directory, where your control streams are</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">         <span class="dt">.nonmem_dir =</span> <span class="st">"/opt/NONMEM"</span>, <span class="co"># location of NONMEM installation</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         <span class="dt">.nonmem_version =</span> <span class="st">"nm74gf"</span>)  <span class="co"># default NONMEM version to use</span></a></code></pre></div>
<p>Finally, it is best to set the modeling directory. By doing this, you do not need to pass the full path to model files, but only the path relative to the specified modeling directory. Pass a path relative to your current working directory to <code><a href="../reference/set_model_directory.html">set_model_directory()</a></code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/set_model_directory.html">set_model_directory</a></span>(<span class="st">"../inst/nonmem"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; options('rbabylon.model_directory') set to /data/home/sethg/rbabylon/inst/nonmem</span></a></code></pre></div>
</div>
</div>
<div id="initial-modeling-run" class="section level1">
<h1 class="hasAnchor">
<a href="#initial-modeling-run" class="anchor"></a>Initial Modeling Run</h1>
<div id="create-model-object" class="section level2">
<h2 class="hasAnchor">
<a href="#create-model-object" class="anchor"></a>Create Model Object</h2>
<p>To begin modeling, first create a model object. This is an S3 object with an accompanying YAML file, kept in your modeling directory. The YAML serves as the “record of truth” for the model, and will persist changes you make to the model as you go.</p>
<p>The <code>.yaml_path</code> argument should have the same name (but with a <code>.yaml</code> extension) as your base model control stream. For instance, the command below assumes you have a control stream name <code>1.ctl</code> or <code>1.mod</code> in the model directory you just defined. The <code>.description</code> argument is required and corresponds to what would be in the <code>$PROB</code> definition in a control stream.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">mod1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/new_model.html">new_model</a></span>(<span class="dt">.yaml_path =</span> <span class="st">"1.yaml"</span>, <span class="dt">.description =</span> <span class="st">"our first model"</span>)</a></code></pre></div>
<p>The model object you have just created can be passed to various functions which you will see in a minute. If you ever need to recreate it, just run <code>mod1 &lt;- read_model("1.yaml")</code> to rebuild it from the YAML. The first thing we will do is submit the model to be run.</p>
</div>
<div id="submit-model" class="section level2">
<h2 class="hasAnchor">
<a href="#submit-model" class="anchor"></a>Submit Model</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">mod1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/submit_model.html">submit_model</a></span>()</a></code></pre></div>
<p>This will return a process object. We won’t discuss this object in this vignette, but other documentation will show how it can be used to check on the model run in progress. Please note that, for this first release, <strong>checking on a model run in progress is not fully implemented.</strong> For now, users should check on their runs manually and only proceed to the next steps once it has successfully completed.</p>
</div>
<div id="summarize-model" class="section level2">
<h2 class="hasAnchor">
<a href="#summarize-model" class="anchor"></a>Summarize Model</h2>
<p>Once the model run has completed, users can get a summary object containing much of the commonly used diagnostic information in a named list.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">sum1 &lt;-<span class="st"> </span>mod1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/model_summary.html">model_summary</a></span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(sum1))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; [1] "run_details"       "run_heuristics"    "parameters_data"  </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; [4] "parameter_names"   "ofv"               "shrinkage_details"</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; [7] "covariance_theta"  "correlation_theta"</span></a></code></pre></div>
<p>These elements can be accessed manually or extracted with built-in helper functions like so:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">param_df1 &lt;-<span class="st"> </span>sum1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/param_estimates.html">param_estimates</a></span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">param_df1</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; # A tibble: 9 x 4</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;   names      estimate   stderr fixed</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; 1 THETA1       2.31   8.63e- 2     0</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 2 THETA2      55.0    3.33e+ 0     0</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 3 THETA3     465.     2.96e+ 1     0</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 4 THETA4      -0.0806 5.55e- 2     0</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 5 THETA5       4.13   1.36e+ 0     0</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 6 OMEGA(1,1)   0.0964 2.00e- 2     0</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; 7 OMEGA(2,1)   0      1.00e+10     1</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; 8 OMEGA(2,2)   0.154  2.67e- 2     0</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 9 SIGMA(1,1)   1      1.00e+10     1</span></a></code></pre></div>
</div>
</div>
<div id="iteration" class="section level1">
<h1 class="hasAnchor">
<a href="#iteration" class="anchor"></a>Iteration</h1>
<p>Much of the benefit of <code>rbabylon</code> is leveraged in the model iteration workflow, and the run log summaries that can be created afterwards. For example, imagine you look at these model results and want to begin iterating on them with a new model.</p>
<p>Imagine you are now in a new R session and no longer have your <code>mod1</code> object. You can easily rebuild it from the YAML file on disk. <em>NOTE:</em> You can pass either a character or integer to <code><a href="../reference/read_model.html">read_model()</a></code>, <code><a href="../reference/submit_model.html">submit_model()</a></code>, etc. to identify your model, assuming that you have set your model directory correctly.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">mod1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_model.html">read_model</a></span>(<span class="dv">1</span>)</a></code></pre></div>
<p>Now the user can create a new model object, based on the original, copying and renaming the control stream in the process.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">mod2 &lt;-<span class="st"> </span>mod1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/copy_model_from.html">copy_model_from</a></span>(<span class="dt">.new_model =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                                 <span class="dt">.description =</span> <span class="st">"two compartment base model"</span>)</a></code></pre></div>
<p>The new control stream file <code>2.ctl</code> can now be edited with the desired changes and then submitted and summarized exactly as above.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">mod2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/submit_model.html">submit_model</a></span>()</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">mod2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/model_summary.html">model_summary</a></span>()</a></code></pre></div>
<p>After looking at these results, the user can add tags, which can later be used to organize your modeling runs.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">mod1 &lt;-<span class="st"> </span>mod1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/modify_model_field.html">add_tags</a></span>(<span class="st">"base model"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">mod2 &lt;-<span class="st"> </span>mod2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/modify_model_field.html">add_tags</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"base model"</span>, <span class="st">"2 compartment"</span>))</a></code></pre></div>
<p>In addition to tags, the user can add decisions that can be referenced later.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">mod2 &lt;-<span class="st"> </span>mod2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/modify_model_field.html">add_decisions</a></span>(<span class="st">"2 compartment model more appropriate than 1 compartment"</span>)</a></code></pre></div>
<p>Now the iteration process continues.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">mod3 &lt;-<span class="st"> </span>mod2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/copy_model_from.html">copy_model_from</a></span>(<span class="dt">.new_model =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb13-3" data-line-number="3">                  <span class="dt">.description =</span> <span class="st">"two compartment with residual errors"</span>)</a></code></pre></div>
<p>Submit and summarize as before.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">mod3 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/submit_model.html">submit_model</a></span>()</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">mod3 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/model_summary.html">model_summary</a></span>()</a></code></pre></div>
<p>Add tags and decisions for filtering in run log, described next.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">mod3 &lt;-<span class="st"> </span>mod3 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">        </span><span class="kw"><a href="../reference/modify_model_field.html">add_tags</a></span>(<span class="st">"2 compartment"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">        </span><span class="kw"><a href="../reference/modify_model_field.html">add_decisions</a></span>(<span class="st">"Added residual errors because it seemed like a good idea."</span>)</a></code></pre></div>
</div>
<div id="run-log" class="section level1">
<h1 class="hasAnchor">
<a href="#run-log" class="anchor"></a>Run Log</h1>
<p>At any point, the user can easily construct a run log tibble to summarize all models run up to this point.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">log_df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/run_log.html">run_log</a></span>()</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">log_df</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 12</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt;   run_id orig_working_dir orig_yaml_file yaml_md5 model_type description</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; 1 1      /data/home/seth… 1.yaml         8521b38… nonmem     our first …</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; 2 2      /data/home/seth… 2.yaml         63ee952… nonmem     two compar…</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; 3 3      /data/home/seth… 3.yaml         bfa56db… nonmem     two compar…</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; # … with 6 more variables: model_path &lt;chr&gt;, bbi_args &lt;list&gt;, based_on &lt;list&gt;,</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; #   tags &lt;list&gt;, decisions &lt;list&gt;, output_dir &lt;chr&gt;</span></a></code></pre></div>
<p>The <code><a href="../reference/run_log.html">run_log()</a></code> returns a tibble (called <code>log_df</code> in this example) which can be manipulated like any other tibble. However, several of the columns (<code>tags</code> and <code>based_on</code> for example) are list columns, which complicates how the user interacts with them. Future releases will have helper functions to more seamlessly interact with <code>log_df</code>, but until then, we have provided some sample <code>dplyr</code> code below.</p>
<div id="viewing-tags-example" class="section level2">
<h2 class="hasAnchor">
<a href="#viewing-tags-example" class="anchor"></a>Viewing tags example</h2>
<p>This example code displays a more human-readable version of the run log, with the tags collapsed to a character vector.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr))</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"></a>
<a class="sourceLine" id="cb17-3" data-line-number="3">log_df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(run_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(<span class="dt">.vars =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(tags<span class="op">:</span>decisions), </a>
<a class="sourceLine" id="cb17-6" data-line-number="6">                   <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(.x), <span class="dt">collapse=</span><span class="st">", "</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(run_id, tags, decisions)</a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt;   run_id tags                  decisions                                        </span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                 &lt;chr&gt;                                            </span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt; 1 1      base model            ""                                               </span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt; 2 2      base model, 2 compar… "2 compartment model more appropriate than 1 com…</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt; 3 3      2 compartment         "Added residual errors because it seemed like a …</span></a></code></pre></div>
</div>
<div id="filtering-tags-example" class="section level2">
<h2 class="hasAnchor">
<a href="#filtering-tags-example" class="anchor"></a>Filtering tags example</h2>
<p>This code uses <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map_lgl</a></code> to filter the run log to only rows containing a specific tag (<code>"2 compartment"</code>).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">log_df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_lgl</a></span>(tags, <span class="op">~</span><span class="st"> "2 compartment"</span> <span class="op">%in%</span><span class="st"> </span>.x)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(run_id, description, tags, decisions)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt;   run_id description                          tags      decisions</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                                &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt; 1 2      two compartment base model           &lt;chr [2]&gt; &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; 2 3      two compartment with residual errors &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#setup">Setup</a><ul class="nav nav-pills nav-stacked">
<li><a href="#installing-babylon">Installing babylon</a></li>
      </ul>
</li>
      <li>
<a href="#initial-modeling-run">Initial Modeling Run</a><ul class="nav nav-pills nav-stacked">
<li><a href="#create-model-object">Create Model Object</a></li>
      <li><a href="#submit-model">Submit Model</a></li>
      <li><a href="#summarize-model">Summarize Model</a></li>
      </ul>
</li>
      <li><a href="#iteration">Iteration</a></li>
      <li>
<a href="#run-log">Run Log</a><ul class="nav nav-pills nav-stacked">
<li><a href="#viewing-tags-example">Viewing tags example</a></li>
      <li><a href="#filtering-tags-example">Filtering tags example</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Devin Pastoor, Seth Green.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
